@{
    ViewBag.Title = "Registre suas horas, parça";
}

<h2>@ViewBag.Title</h2>

@*<select>*@
@*    @foreach (var daysOfWeek in ViewBag.DaysOfWeek)*@
@*    {*@
@*        <option value=@daysOfWeek.Name>@daysOfWeek.Name</option>*@
@*    }*@
@*</select>*@
@**@
@*<select>*@
@*    @foreach (var schedule in ViewBag.Schedules)*@
@*    {*@
@*        <option value='@schedule.Starting @schedule.Ending'>@schedule.Starting às @schedule.Ending</option>*@
@*    }*@
@*</select>*@
@**@
@*<button type="button" class="btn btn-success">Adicionar</button>*@
@**@
@*<table class="table table-striped">*@
@*    <thead>*@
@*        <tr>*@
@*            <th>Dia da semana</th>*@
@*            <th>Entrada</th>*@
@*            <th>Saída</th>*@
@*            <th>Add/Rem</th>*@
@*        </tr>*@
@*    </thead>*@
@*    <tbody>*@
@*    @foreach (var workday in ViewBag.Workdays)*@
@*    {*@
@*        <tr>*@
@*            <td>@workday[0].Name</td>*@
@*            <td>@workday[1].Starting</td>*@
@*            <td>@workday[1].Ending</td>*@
@*            <td><button id='@workday[0].Name @workday[1].Starting @workday[1].Ending' class="btn btn-success"*@
@*                        type="button">Adicionar</button></td>*@
@*        </tr>*@
@*    }*@
@*    </tbody>*@
@*</table>*@
@**@
@*@using(Html.BeginForm())*@
@*{*@
@*    <input type="text" name="reportName" />*@
@*    <input type="submit" />*@
@*}*@


<div class="alert alert-success" role="alert">
    <p id="added" class="text-center"></p>
</div>

<table id="myTable"></table>

<script>
     $(document).ready(function () {
         var table = $('#myTable').DataTable({
            pageLength: 11,
            serverSide: true,
            ajax: "/home/pagedata",
            "language": {
                "url": "http://cdn.datatables.net/plug-ins/1.10.15/i18n/Portuguese-Brasil.json"
            },
            "lengthMenu": [ [11, 200], [11, "All"] ],
                columns: [
                {
                    name: 'name',
                    data: 'name',
                    title: "Nome",
                    sortable: false,
                    searchable: false
                },
                {
                    name: 'starting',
                    data: "starting",
                    title: "Início",
                    sortable: false,
                    searchable: false
                },
                {
                    name: 'ending',
                    data: "ending",
                    title: "Fim",
                    sortable: false,
                    searchable: false
                },
                {
                    title: "Add/Rem",
                    "targets": -1,
                    "data": null,
                    "defaultContent": "<button class='btn btn-success'>Adiconar</button>"
                }
            ]
//            "initComplete": function () {
//                var api = this.api();
//                api.$('button').click( function () {
//                    var data = api.row( $(this).parents('tr') ).data();
//                    alert( data[0] + "das " + data[1] + "até as " + data[1]);
//                } );
//            }
        });

         $('#myTable tbody').on( 'click', 'button', function () {
             var data = table.row( $(this).parents('tr') ).data();
             $("#added").text("Adicionado " + data["name"] + " das " + data["starting"] + " até as " + data["ending"]);
         });
    });

</script>